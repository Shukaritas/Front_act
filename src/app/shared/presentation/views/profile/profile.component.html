<div class="profile-container" *ngIf="user">
  <header class="page-header">
    <button class="back-button" routerLink="/dashboard">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1>{{'PROFILE.title' | translate}}</h1>
  </header>

  <main class="profile-content">
    <section class="form-section">
      <h2>{{'PROFILE.PERSONAL_INFO.TITLE' | translate}}</h2>
      <div class="form-field">
        <input type="text" [(ngModel)]="user.userName" name="userName" [placeholder]="'PROFILE.PERSONAL_INFO.NAME_PLACEHOLDER' | translate">
      </div>
      <div class="form-field">
        <input type="email" [(ngModel)]="user.email" name="email" [placeholder]="'PROFILE.PERSONAL_INFO.EMAIL_PLACEHOLDER' | translate">
      </div>
      <div class="form-field">
        <input type="text" [(ngModel)]="user.phoneNumber" name="phoneNumber" placeholder="+51XXXXXXXX" [placeholder]="'PROFILE.PERSONAL_INFO.PHONE_PLACEHOLDER' | translate">
      </div>
      <div class="form-field">
        <input type="text" [(ngModel)]="user.identificator" name="identificator" [readonly]="true" [placeholder]="'PROFILE.PERSONAL_INFO.ID_PLACEHOLDER' | translate">
      </div>

      <div class="form-field">
        <input type="text" [(ngModel)]="user.location" name="location" [placeholder]="'PROFILE.PERSONAL_INFO.LOCATION' | translate">
      </div>

      <div class="form-actions right">
        <button class="save-btn" (click)="onSavePersonalInfo()">{{'PROFILE.PASSWORD.SAVE_BUTTON' | translate}}</button>
      </div>

      <div class="toggle-field">
        <label>{{'PROFILE.PERSONAL_INFO.LOCATION_PUBLIC' | translate}}</label>
        <mat-slide-toggle
          color="primary"
          [(ngModel)]="user.isLocationPublic"
          name="isLocationPublic">
        </mat-slide-toggle>
      </div>

      <div class="toggle-field">
        <label>{{'PROFILE.PERSONAL_INFO.NOTIFICATIONS' | translate}}</label>
        <mat-slide-toggle color="primary"></mat-slide-toggle>
      </div>
    </section>

    <section class="form-section">
      <h2>{{'PROFILE.PASSWORD.TITLE' | translate}}</h2>

      <div class="form-field">
        <div class="password-wrapper">
          <input
            [type]="showCurrentPassword ? 'text' : 'password'"
            [(ngModel)]="currentPassword"
            name="currentPassword"
            class="password-input"
            [placeholder]="'PROFILE.PASSWORD.CURRENT_PLACEHOLDER' | translate" />
          <button mat-icon-button type="button" class="eye-btn" (click)="toggleCurrent()">
            <mat-icon>{{ showCurrentPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </div>
      </div>

      <div class="form-field">
        <div class="password-wrapper">
          <input
            [type]="showNewPassword ? 'text' : 'password'"
            [(ngModel)]="newPassword"
            name="newPassword"
            class="password-input"
            [placeholder]="'PROFILE.PASSWORD.NEW_PLACEHOLDER' | translate" />
          <button mat-icon-button type="button" class="eye-btn" (click)="toggleNew()">
            <mat-icon>{{ showNewPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </div>
      </div>

      <div class="form-field">
        <div class="password-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            [(ngModel)]="confirmNewPassword"
            name="confirmPassword"
            class="password-input"
            [placeholder]="'PROFILE.PASSWORD.CONFIRM_PLACEHOLDER' | translate" />
          <button mat-icon-button type="button" class="eye-btn" (click)="toggleConfirm()">
            <mat-icon>{{ showConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </div>
      </div>

      <div class="form-actions right">
        <button class="save-btn" (click)="onChangePassword()">{{'PROFILE.PASSWORD.SAVE_BUTTON' | translate}}</button>
      </div>
    </section>
  </main>

  <footer class="profile-footer">
    <button class="secondary-btn" (click)="onLogout()">
      <mat-icon>logout</mat-icon>
      <span>{{'PROFILE.FOOTER.LOGOUT' | translate}}</span>
    </button>
    <button class="danger-btn" (click)="onDeleteAccount()">
      <mat-icon>delete_outline</mat-icon>
      <span>{{'PROFILE.FOOTER.DELETE_ACCOUNT' | translate}}</span>
    </button>
  </footer>
</div>
